0. 맨 먼저, 준비물인 아두이노, 컴퓨터를 준비하고, 이 작업에 필요한 프로그램인 아두이노 프로그램, 프로세싱 프로그램(서버 만들기용) 두가지를 다운받고, MIT앱인벤터는 온라인용이므로 인터넷으로 접속하여 작업할 준비를 해놓습니다.

0.1. (아두이노 조립)
아두이노와 빵판, 스피커, 전선을 조립합니다.
빵판에 스피커를 꽂고 스피커에 전류를 줘서 연주하기위해 양옆에 전선을 꽂고, 각각 GND와 아두이노의 (디지털)4번핀에 꽂습니다.

1. 아두이노와 컴퓨터를 연결하는 USB선으로 아두이노와 컴퓨터선을 연결하고, 아두이노 프로그램과 프로세싱 프로그램, MIT 앱 인벤터를 켜놓고 아두이노가 연결되어있는 포트를 선택합니다.

![rhk1](https://github.com/irop3126/asdf/assets/127822814/1fa2f98b-b967-4058-916a-a69522d24d6c)

2. 다음으로, 아래의 조건이 담긴 프로그램의 소스코드를 작성합니다.
작성하고 난 뒤에는 소스코드를 전부 실행합니다.

아두이노 코드

```c++
int s = 11;  // 스위치 핀 번호
int l = 13; // LED 핀 번호

void setup() {
  pinMode(l, OUTPUT);  // LED를 출력 핀으로 설정
  pinMode(s, INPUT_PULLUP);  // 내부 풀업 저항을 사용하는 입력 핀으로 설정
  Serial.begin(9600);  // 시리얼 통신 시작
}

void loop() {
  int sw = digitalRead(s);  // 스위치 상태를 읽어옴
  Serial.println(sw);  // 스위치 상태를 시리얼 모니터에 출력
  delay(1000);  // 1초 대기

  if (Serial.available() > 0) {  // 시리얼 입력이 있는 경우
    String c = Serial.readStringUntil('\n');  // 시리얼에서 문자열을 읽어옴, 개행 문자('\n')까지 읽음
    if (c == "5") {  // 만약 입력이 "5"라면
      digitalWrite(l, HIGH);  // LED를 켬
    } else if (c == "6") {  // 만약 입력이 "6"이라면
      digitalWrite(l, LOW);  // LED를 끔
    } else if (c == "7") {  // 만약 입력이 "7"이라면
      playSong();  // playSong() 함수를 호출하여 소리를 출력
    }
  }
}

void playSong() {
  int m[] = {523, 523, 783, 783, 880, 880, 783};  // 소리를 나타내는 주파수 배열
  int n = 500;  // 음악 소리가 나는 시간(ms)

  for (int i = 0; i < 7; i++) {
    tone(4, m[i], n);  // 주파수와 시간을 지정하여 소리를 내기
    delay(n);  // 소리가 재생되는 동안 대기
  }
  noTone(4);  // 소리 중지
}
```
//아두이노에서 스위치(아두이노의 11번 포트)가 (GND포트 와)서로 연결되었는지를 확인하고, 휴대폰에서 입력받은 데이터(숫자)를 서버에서 받아서 특정 명령을 수행하는 식으로 작성되어있습니다.



프로세싱 코드
```java
import processing.net.*;
import processing.serial.*;

Server s;
Client c;
Serial p;

void setup() {
  s = new Server(this, 12345);  // 서버 생성, 포트 12345 사용
  p = new Serial(this, "COM3", 9600);  // COM3 포트와 시리얼 통신 시작
}

String msg = "hi";  // 초기 메시지 설정

void draw() {
  c = s.available();  // 클라이언트 연결 확인
  if (c != null) {  // 클라이언트가 연결된 경우
    String m = c.readString();  // 클라이언트로부터 데이터를 읽어옴
    if (m.indexOf("GET /") == 0) {  // 만약 클라이언트 요청이 "GET /"이라면
      c.write("HTTP/1.1 200 OK\r\n\r\n");  // 응답 헤더를 작성하여 스마트폰으로 보냄
      c.write(msg);  // 메시지를 보냄
    }
    if (m.indexOf("PUT /") == 0) {  // 만약 클라이언트 요청이 "PUT /"이라면
      int n = m.indexOf("\r\n\r\n") + 4;  // 데이터 위치 찾기
      m = m.substring(n);  // 데이터를 추출
      m += '\n';  // 개행 문자를 추가
      p.write(m);  // 시리얼 포트를 통해 데이터를 아두이노로 보냄
      print(m);  // 메시지를 출력
      c.write("HTTP/1.1 200 OK\r\n\r\n");  // 클라이언트에게 응답을 보냄
      c.write(m);  // 클라이언트에게도 메시지를 보냄
    }
    c.stop();  // 클라이언트 연결 종료
  }

  if (p.available() > 0) {  // 시리얼 데이터가 있는 경우
    String m = p.readStringUntil('\n');  // 시리얼에서 데이터를 읽어옴, 개행 문자('\n')까지 읽음
    if (m != null)  // 데이터가 유효한 경우
      msg = m;  // 메시지를 업데이트
    print(msg);  // 메시지를 출력
  }
}
```
//프로세싱에서 서버를 통해 데이터가 원활히 아두이노와 휴대폰에게 동시에 잘 전달되도록 하는 코드가 짜여져 있습니다.


앱인벤터

![제목 없음](https://github.com/irop3126/asdf/assets/127822814/fffe5fe5-cc79-49a1-98e0-7306a4cbf031)

버튼을 눌러 특정 명령을 수행하도록 하기위해 버튼과 인터넷(와이파이)을 통해 데이터를 전달하도록하는 장치와 스위치의 상태를 휴대폰으로 가져오기위해 특정시간마다 불러오게 하는 clock을 배치한 상태입니다.

영어기준으로, userinterface > button , sensors > clock , connectivity > web을 찾아서 휴대폰 화면에 드래그 하시면 됩니다.
우측에 위치한 Components에서 배치된 각 요소들을 어떻게 조정이 가능합니다.
clock은 1000 = 1초이고 텀이 길다싶으면 숫자를 줄이시면 됩니다.
web은 윈도우에 내장된 명령프롬포트인 cmd를 켜서 ipconfig 명령어를 친 다음, 나오는 ipv4주소를 입력하고, 프로세싱에서 설정한 포트번호를 작성하시면 됩니다. (예: ipv4주소:포트번호)

![blocks (2)](https://github.com/irop3126/asdf/assets/127822814/aa8ee3bb-32f6-4282-9668-24c479e43cbd)

휴대폰에서 버튼을 눌러서 명령을 수행시킬 데이터를 서버를 통해 아두이노에 전달하는 블록코드와 아두이노의 스위치 상태가 어떤지를 clock이 특정 시간마다 확인하는 데이터를 서버를 통해 휴대폰으로 받아서 그것이 무엇인지를 판별하고 화면의 색깔을 바꾸도록하는 블록코드입니다.

3. 짜여진 코드로 이루어진 프로그램이 모두 실행되었다면, 앱 인벤터의 앱을 휴대폰에서 실행하기위해 휴대폰에 앱인벤터를 설치하고, 위에 있는 메뉴 connect > AI companion 을 선택하고 휴대폰에 있는 앱인벤터를 실행하여 QR코드를 찍습니다. (아니면 QR코드 주변에 있는 6자리 영어 코드를 입력하면 됩니다.)

4. 제대로 실행이 되었다면 만들어진 앱이 잘 작동하는지 확인하면 끝입니다.


-소감문-

김범석
이번 팀프로젝트가 지금까지 배운내용을 통해 여러 조건이 있는 프로그램을 만들고 그것을 초심자도 쉽게 만들정도로 만드는 과정등에 대해 설명해야해서 힘들었고, 시간이 조금 부족하게 느껴져서 조잡한 정도의 설명에 아쉬움을 느끼지만, 나름대로 프로그램이 잘 돌아가고 이것이 어떻게 돌아가면서 어덯게 만들어야하는지를 설명하는거에 대해 재미를 느꼈습니다.

정희정
이번 팀프로젝트는 1주차부터 시작해 지금까지 배운 내용을 요구하기에 조금은 어려웠으나, 이번 과제를 통해 지금까지 배웠던 내용을 서로 혼합하여 재밌는 결과를 도출할 수 있게 되어 재미를 느끼게 된 것 같습니다.
